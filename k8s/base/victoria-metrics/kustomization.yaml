apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: victoria-metrics

# VictoriaMetricsに関連するすべてのリソース（scrapeはvmagentに移管）
resources:
  - persistentvolumeclaim.yaml
  - statefulset.yaml
  - service.yaml

# VictoriaMetrics固有のラベル
labels:
  - includeSelectors: true
    pairs:
      app.kubernetes.io/name: victoria-metrics
      app.kubernetes.io/component: database
      app.kubernetes.io/part-of: smart-home-monitoring

# 共通のアノテーション
commonAnnotations:
  app.kubernetes.io/managed-by: kustomize
  project.kubernetes.io/component: victoria-metrics

# イメージの設定（バージョン管理）
images:
  - name: victoriametrics/victoria-metrics
    newTag: v1.97.1

# ConfigMapとSecretの生成設定
configMapGenerator: []
secretGenerator: []

# リソースの変換設定
patches: []
# 名前接頭辞・接尾辞（必要に応じて）
# namePrefix: ""
# nameSuffix: ""
