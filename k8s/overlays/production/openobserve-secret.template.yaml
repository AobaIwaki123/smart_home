# OpenObserve 認証情報の Secret Template
# 使用方法:
#   1. k8s/.env に ZO_ROOT_USER_EMAIL / ZO_ROOT_USER_PASSWORD を設定
#   2. make k8s-secret-generate を実行
#   3. kubectl apply -k k8s/overlays/production でデプロイ
#
# basicauth: VictoriaMetrics Remote Write の Authorization ヘッダー値
#   = Base64("email:password")  ← Kubernetes data フィールドとして二重エンコードされます

apiVersion: v1
kind: Secret
metadata:
  name: openobserve-credentials
  namespace: smart-home
  labels:
    app: openobserve
    component: observability
type: Opaque
data:
  # make k8s-secret-generate で自動的にBase64エンコードされて挿入されます
  email: "{{ZO_ROOT_USER_EMAIL_BASE64}}"
  password: "{{ZO_ROOT_USER_PASSWORD_BASE64}}"
  # VM remote write 用 Authorization ヘッダー値: Base64("email:password")
  basicauth: "{{ZO_BASICAUTH_BASE64}}"
